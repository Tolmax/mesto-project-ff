(()=>{"use strict";var e,t,n,r,o={579:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{Q:()=>s,u:()=>d});var o=n(75),c=n(670),a=n(314),u=n(858),i=n(853),l=e([o,c]);[o,c]=l.then?(await l)():l;var s=await(0,o.qA)();function d(e,t){i.qv.src=e,i.lQ.textContent=t,i.qv.alt=t,i.d3.classList.add("popup_is-opened"),document.addEventListener("keydown",a.PH)}function p(e){e.preventDefault(),i.LI.textContent="Сохранить...",(0,o.ri)().then((function(e){i.JX.textContent=e.name,i.nQ.textContent=e.about,(0,a.j4)(i.H6),document.removeEventListener("keydown",a.PH),(0,u.T1)(i.cr,i.vc),i.LI.textContent="Сохранить"}))}function f(e){e.preventDefault(),i.LI.textContent="Сохранить...",(0,o.vM)().then((function(t){var n=(0,c.L)(t,d);i.DZ.prepend(n),e.target.reset(),(0,a.j4)(i.Az),document.removeEventListener("keydown",a.PH),i.LI.textContent="Сохранить"}))}function y(e){e.preventDefault(),(0,o.mb)(e).then((function(e){i.zA.style.backgroundImage="url(".concat(e.avatar,")"),(0,a.j4)(i.B3),document.removeEventListener("keydown",a.PH),(0,u.T1)(i.cr,i.vc),i.LI.textContent="Сохранить"}))}(0,o.QB)(),(0,u.uK)(i.vc,i.cr),i.KP.addEventListener("click",(function(){i.O9.value=i.JX.textContent,i.bj.value=i.nQ.textContent,(0,a.Mw)(i.H6)})),i.ew.addEventListener("click",(function(){(0,u.T1)(i.cr,i.vc),(0,a.j4)(i.H6)})),i.R2.addEventListener("submit",p),i.yY.addEventListener("click",(function(){(0,a.Mw)(i.Az)})),i.GK.addEventListener("click",(function(){(0,u.T1)(i.cr,i.vc),(0,a.j4)(i.Az)})),i.yy.addEventListener("submit",f),i.Ke.addEventListener("click",(function(){(0,a.j4)(i.d3)})),i.Du.addEventListener("click",(function(){(0,a.Mw)(i.B3)})),i.AP.addEventListener("click",(function(){(0,u.T1)(i.cr,i.vc),(0,a.j4)(i.B3)})),i.Qv.addEventListener("submit",y),i.$E.addEventListener("click",(function(){(0,u.T1)(i.cr,i.vc),(0,a.j4)(i.YS)})),r()}catch(v){r(v)}}),1)},75:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{QB:()=>S,Rr:()=>L,h5:()=>w,mb:()=>j,qA:()=>m,ri:()=>q,sF:()=>E,vM:()=>k});var o=n(670),c=n(579),a=n(853),u=e([o,c]);function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,u=[],i=!0,l=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}function f(e){if(Array.isArray(e))return e}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=v(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw c}}}}function v(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}[o,c]=u.then?(await u)():u;var i={baseUrl:"https://nomoreparties.co/v1/wff-cohort-3",headers:{authorization:"c3983116-e362-4de3-b314-b984b8daa8fe","Content-Type":"application/json"}};function m(){return fetch("".concat(i.baseUrl,"/users/me"),{headers:{authorization:"c3983116-e362-4de3-b314-b984b8daa8fe"}}).then((function(e){return e.ok?e.json():Promise.reject("Что-то пошло не так: ".concat(e.status))})).then((function(e){return e._id})).catch((function(e){console.error("Что-то пошло не так: ".concat(e.status))}))}function h(e){a.JX.textContent=e.name,a.nQ.textContent=e.about,a.zA.style.backgroundImage="url(".concat(e.avatar,")")}function b(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,u=(0,o.L)(r,c.u);a.DZ.append(u)}}catch(e){n.e(e)}finally{n.f()}}function S(){Promise.all([fetch("".concat(i.baseUrl,"/users/me"),{headers:{authorization:"c3983116-e362-4de3-b314-b984b8daa8fe"}}).then((function(e){return e.ok?e.json():Promise.reject("Что-то пошло не так: ".concat(e.status))})).catch((function(e){console.error("Что-то пошло не так: ".concat(e.status))})),fetch("".concat(i.baseUrl,"/cards"),{headers:{authorization:"c3983116-e362-4de3-b314-b984b8daa8fe"}}).then((function(e){return e.ok?e.json():Promise.reject("Что-то пошло не так: ".concat(e.status))})).catch((function(e){console.error("Что-то пошло не так: ".concat(e.status))}))]).then((function(e){var t,n=(2,f(t=e)||p(t,2)||v(t,2)||d()),r=n[0],o=n[1];h(r),b(o)}))}function q(){return fetch("".concat(i.baseUrl,"/users/me"),{method:"PATCH",headers:i.headers,body:JSON.stringify({name:a.O9.value,about:a.bj.value})}).then((function(e){return e.json()})).catch((function(e){console.error("Что-то пошло не так: ".concat(e.status))}))}var l=a.yy.querySelector("#place-input"),s=a.yy.querySelector("#link-input");function k(){return fetch("".concat(i.baseUrl,"/cards"),{method:"POST",headers:i.headers,body:JSON.stringify({name:l.value,link:s.value})}).then((function(e){return e.json()})).catch((function(e){console.error("Что-то пошло не так: ".concat(e.status))}))}function E(e){return fetch("".concat(i.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:i.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.error("Что-то пошло не так: ".concat(e.status))}))}function L(e){return fetch("".concat(i.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:i.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.error("Что-то пошло не так: ".concat(e.status))}))}function w(e){return fetch("".concat(i.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:i.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.error("Что-то пошло не так: ".concat(e.status))}))}function j(){return fetch("".concat(i.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:i.headers,body:JSON.stringify({avatar:a.wg.value})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.error("Что-то пошло не так: ".concat(e.status))}))}r()}catch(g){r(g)}}))},670:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{L:()=>y});var o=n(75),c=n(579),a=n(853),u=n(314),i=e([o,c]);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw c}}}}function p(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}[o,c]=i.then?(await i)():i;var l=document.querySelector("#card-template").content.querySelector(".card");function y(e,t){var n=l.cloneNode(!0),r=n.querySelector(".card__image"),i=n.querySelector(".card__title"),d=n.querySelector(".card__delete-button"),p=n.querySelector(".card__like-button"),f=n.querySelector(".card__like-number");i.textContent=e.name,r.alt="фотография "+e.name,r.src=e.link,f.textContent=e.likes.length;var y=function(e){var t="card__like-button_is-active";!0===e?p.classList.add(t):p.classList.remove(t)};if(y(s),c.Q!==e.owner._id)d.style.visibility="hidden";else{function v(){(0,u.Mw)(a.YS),a.jM.addEventListener("click",(function t(){(0,o.sF)(e._id).then((function(){console.log(e._id),(0,u.j4)(a.YS),document.removeEventListener("keydown",u.PH),a.jM.removeEventListener("click",t),d.closest(".card").remove()}))}))}d.addEventListener("click",v)}return r.addEventListener("click",(function(){t(e.link,e.name)})),p.addEventListener("click",(function(){!0===s?(0,o.h5)(e._id).then((function(e){s=!1,y(!1),f.textContent=e.likes.length})).catch((function(){console.error("Карточку не получилось дизлайкнуть")})):(0,o.Rr)(e._id).then((function(e){s=!0,y(!0),f.textContent=e.likes.length})).catch((function(){console.error("Карточку не получилось лайкнуть")}))})),n}var s=function(e){var t,n=d(e.likes);try{for(n.s();!(t=n.n()).done;)if(t.value._id===c.Q)return!0}catch(e){n.e(e)}finally{n.f()}};r()}catch(v){r(v)}}))},853:(e,t,n)=>{n.d(t,{$E:()=>C,AP:()=>s,Az:()=>b,B3:()=>l,DZ:()=>r,Du:()=>i,EH:()=>T,GK:()=>S,H6:()=>c,JX:()=>v,KP:()=>o,Ke:()=>E,LI:()=>g,O9:()=>p,Qv:()=>d,R2:()=>u,YS:()=>x,bj:()=>f,cr:()=>j,d3:()=>k,ew:()=>a,jM:()=>P,lQ:()=>w,nQ:()=>_,qv:()=>L,vc:()=>A,wg:()=>y,yY:()=>h,yy:()=>q,zA:()=>m});var r=document.querySelector(".places__list"),o=document.querySelector(".profile__edit-button"),c=document.querySelector(".popup_type_edit"),a=c.querySelector(".popup__close"),u=c.querySelector(".popup__form"),i=document.querySelector(".profile__image"),l=document.querySelector(".popup_type_avatar"),s=l.querySelector(".popup__close"),d=l.querySelector(".popup__form"),p=document.querySelector(".popup__input_type_name"),f=document.querySelector(".popup__input_type_description"),y=document.querySelector(".popup__input_type_urlavatar"),v=document.querySelector(".profile__title"),_=document.querySelector(".profile__description"),m=document.querySelector(".profile__image"),h=document.querySelector(".profile__add-button"),b=document.querySelector(".popup_type_new-card"),S=b.querySelector(".popup__close"),q=b.querySelector(".popup__form"),k=document.querySelector(".popup_type_image"),E=k.querySelector(".popup__close"),L=k.querySelector(".popup__image"),w=k.querySelector(".popup__caption"),j=document.querySelector(".popup__form"),g=j.querySelector(".popup__button"),A={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_active"},x=document.querySelector(".popup_type_confirm"),C=x.querySelector(".popup__close"),P=x.querySelector(".popup__button"),T=document.querySelectorAll(".popup")},314:(e,t,n)=>{n.d(t,{Mw:()=>c,PH:()=>u,j4:()=>a});var r=n(853),o=n(858);function c(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",u)}function a(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",u)}function u(e){"Escape"===e.key&&((0,o.T1)(r.cr,r.vc),a(r.H6),a(r.Az),a(r.d3),a(r.B3),a(r.YS))}r.EH.forEach((function(e){e.addEventListener("click",(function(t){t.target===e&&((0,o.T1)(r.cr,r.vc),a(r.H6),a(r.Az),a(r.d3),a(r.B3),a(r.YS))}))}))},858:(e,t,n)=>{n.d(t,{T1:()=>a,uK:()=>o});var r=function(e,t){t.classList.remove("popup__input_type_error");var n=e.querySelector(".".concat(t.id,"-error"));n.classList.remove("popup__input-error_active"),n.textContent=""},o=function(){Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(".popup__input")),n=e.querySelector(".popup__button");c(t,n),t.forEach((function(o){o.addEventListener("input",(function(){!function(e,t){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?(r(e,t),console.log("valid")):(function(e,t,n){t.classList.add("popup__input_type_error");var r=e.querySelector(".".concat(t.id,"-error"));r.textContent=n,r.classList.add("popup__input-error_active")}(e,t,t.validationMessage),console.log("not valid"))}(e,o),c(t,n)}))}))}(e)}))},c=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove("popup__button_inactive")):(t.disabled=!0,t.classList.add("popup__button_inactive"))},a=function(e,t){Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()}));var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);n.forEach((function(t){t.value="",r(e,t),t.setCustomValidity(""),c(n,o)}))}))}}},c={};function a(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={exports:{}};return o[e](n,n.exports,a),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(o,c,a)=>{var u;a&&((u=[]).d=-1);var i,l,s,d=new Set,p=o.exports,f=new Promise(((e,t)=>{s=t,l=e}));f[t]=p,f[e]=e=>(u&&e(u),d.forEach(e),f.catch((e=>{}))),o.exports=f,c((o=>{var c;i=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var c=[];c.d=0,o.then((e=>{a[t]=e,r(c)}),(e=>{a[n]=e,r(c)}));var a={};return a[e]=e=>e(c),a}}var u={};return u[e]=e=>{},u[t]=o,u})))(o);var a=()=>i.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(c=()=>t(a)).r=0;var n=e=>e!==u&&!d.has(e)&&(d.add(e),e&&!e.d&&(c.r++,e.push(c)));i.map((t=>t[e](n)))}));return c.r?l:a()}),(e=>(e?s(f[n]=e):l(p),r(u)))),u&&u.d<0&&(u.d=0)},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(579)})();